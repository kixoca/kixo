.row
  .four.columns
    %ul.vertical.tabs.white
      %li.active= link_to t("users.registrations.edit.sections.account.label"), "#account"
      %li= link_to t("users.registrations.edit.sections.email_notifications.label"), "#notifications"
      - if current_user.is_a_professional?
        %li= link_to t("users.registrations.edit.sections.profile.label"), "#profile"
      %li= link_to t("users.registrations.edit.sections.billing.label"), "#billing"
      - if current_user.is_a_professional?
        %li= link_to t("users.registrations.edit.sections.categories.label"), "#categories"
      %li= link_to t("users.registrations.edit.sections.contact.label"), "#contact"
  .eight.columns
    %ul.tabs-content
      %li#accountTab.active
        = simple_form_for(resource, :as => resource_name, :url => "#{registration_path(resource_name)}#account", :html => { :method => :put }) do |f|
          .page
            %header
              .container
                %hgroup
                  %h1=t "users.registrations.edit.sections.account.title"
                  %h4.subheader=t "users.registrations.edit.sections.account.subtitle"
            %section
              .container
                = f.input :name, :label => t("users.fields.name.label")
                = f.input :email, :label => t("users.fields.email.label")
                = f.input :password, :label => t("users.fields.password.label")
                = f.input :password_confirmation, :label => t("users.fields.password_confirmation.label")
            %section
              .container
                = f.association :locale, :label => t("users.fields.locale.label"), :collection => @all_locales
                = f.association :locales, :label => t("users.fields.locales.label"), :collection => @all_locales, :as => :check_boxes
            %section
              .container
                = f.input :is_a_professional, :label => t("users.fields.is_a_professional.label")
            %section
              .container
                = f.button :submit, t("users.registrations.edit.submit")
            %section
              .container
                %p
                  = t("users.registrations.delete.unhappy")
                  = link_to t("users.registrations.delete.title"), registration_path(resource_name), :data => { :confirm => t("users.registrations.delete.confirm") }, :method => :delete
      %li#notificationsTab
        = simple_form_for(resource, :as => resource_name, :url => "#{registration_path(resource_name)}#notifications", :html => { :method => :put }) do |f|
          .page
            %header
              .container
                %hgroup
                  %h1=t "users.registrations.edit.sections.email_notifications.title"
                  %h4.subheader=t "users.registrations.edit.sections.email_notifications.subtitle"
            %section
              .container
                %fieldset
                  %legend=t "users.registrations.edit.sections.email_notifications.legend"
                  = f.input :notify_of_kixo_news, :label => t("users.fields.notify_of_kixo_news.label")
                  = f.input :notify_of_partner_news, :label => t("users.fields.notify_of_partner_news.label")
                  = f.input :notify_of_new_messages, :label => t("users.fields.notify_of_new_messages.label")
                  = f.input :notify_of_answers, :label => t("users.fields.notify_of_answers.label")
                  = f.input :notify_of_replies, :label => t("users.fields.notify_of_replies.label")
                  = f.input :notify_of_similar_questions, :label => t("users.fields.notify_of_similar_questions.label")
            %section
              .container
                = f.button :submit, t("users.registrations.edit.submit")
      %li#profileTab
        = simple_form_for(resource, :as => resource_name, :url => "#{registration_path(resource_name)}#profile", :html => { :method => :put }) do |f|
          .page
            %header
              .container
                %hgroup
                  %h1=t "users.registrations.edit.sections.profile.title"
                  %h4.subheader=t "users.registrations.edit.sections.profile.subtitle"
            %section
              .container
                = f.input :website, :label => t("users.fields.website.label")
                = f.input :twitter, :label => t("users.fields.twitter.label")
                = f.input :facebook, :label => t("users.fields.facebook.label")
                = f.input :google_plus, :label => t("users.fields.google_plus.label")
                = f.input :linkedin, :label => t("users.fields.linkedin.label")
                = f.input :tel, :label => t("users.fields.tel.label")
                = f.input :headshot, :label => t("users.fields.headshot.label")
                = f.input :bio, :label => t("users.fields.bio.label")
            %section
              .container
                = f.button :submit, t("users.registrations.edit.submit")
      %li#billingTab
        .page
          %header
            .container
              %hgroup
                %h1=t "users.registrations.edit.sections.billing.title"
                %h4.subheader=t "users.registrations.edit.sections.billing.subtitle"
          %section
            .container
              %a.button{:href => "#", :data => {"reveal-id" => "create_card"}}=t "cards.new.label"
      - if current_user.is_a_professional?
        %li#categoriesTab
          = simple_form_for(resource, :as => resource_name, :url => "#{registration_path(resource_name)}#categories", :html => { :method => :put }) do |f|
            .page
              %header
                .container
                  %hgroup
                    %h1=t "users.registrations.edit.sections.categories.title"
                    %h4.subheader=t "users.registrations.edit.sections.categories.subtitle"
              %section
                .container
                  = f.input :clear_topics, :as => :hidden, :value => true
                  = f.input :clear_professions, :as => :hidden, :value => true
                  %ul.accordion.compact.marg-bottom
                    - @all_categories.each do |category|
                      %li
                        .title
                          %h5= category.name
                        .content
                          = f.association :topics, :collection => category.topics, :as => :check_boxes, :wrapper => :block_grid, :item_wrapper_class => "block-item two-up"
                          = f.association :professions, :collection => category.professions, :as => :check_boxes, :wrapper => :block_grid, :item_wrapper_class => "block-item two-up"
              %section
                .container
                  = f.button :submit, t("users.registrations.edit.submit")
      %li#contactTab
        = simple_form_for(resource, :as => resource_name, :url => "#{registration_path(resource_name)}#contact", :html => { :method => :put }) do |f|
          .page
            %header
              .container
                %hgroup
                  %h1=t "users.registrations.edit.sections.contact.title"
                  %h4.subheader=t "users.registrations.edit.sections.contact.subtitle"
            %section
              .container
                = render "shared/location_selector", :f => f, :postal_code => resource.is_a_professional, :street_address => resource.is_a_professional
            %section
              .container
                = f.button :submit, t("users.registrations.edit.submit")
#create_card.reveal-modal
  = render "cards/shared/new", :resource => resource, :resource_name => resource_name
