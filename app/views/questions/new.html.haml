.row
  .eight.columns
    = form_for @question do |f|
      .page
        %header
          .container
            %h1=t "questions.new.title"
        - unless @question.errors.blank?
          %section.errors
            .container
              = render "/shared/errors", :errors => @question.errors
              = debug @question
        %section
          .container
            %h3=t "questions.new.sections.details.title"
            %p=t "questions.new.sections.details.subtitle"
            .row
              .twelve.columns
                = f.label :title, t("questions.new.fields.title.label")
                = f.text_field :title, :class => "oversize", :placeholder => t("questions.new.fields.title.placeholder")
            .row
              .twelve.columns
                = f.label :details, t("questions.new.fields.details.label")
                = f.text_area :details, :size => "x5", :placeholder => t("questions.new.fields.details.placeholder")
            .row
              .twelve.columns
                %label
                  = f.check_box :is_private
                  =t "questions.new.fields.is_private.label"
        %section
          .container
            %h3=t "questions.new.sections.category.title"
            %p=t "questions.new.sections.category.subtitle"
            %ul.accordion.compact
              - @all_categories.each do |category|
                %li
                  .title
                    %h5= category.name
                  .content
                    %ul.block-grid.three-up
                      - category.topics.each do |topic|
                        %li
                          %label
                            = check_box_tag "question[topic_ids][]", topic.id, (session[:question][:topic_ids] and session[:question][:topic_ids].include?("#{topic.id}"))
                            = topic.name
        - unless current_user
          %section
            .container
              %h3=t "questions.new.sections.account.title"
              %p=t "questions.new.sections.account.subtitle"
              %ul.tabs.pill
                %li.active
                  %a{:href => "#signup"}
                    =t "questions.new.sections.account.sign_up"
                %li
                  %a{:href => "#signin"}
                    =t "questions.new.sections.account.sign_in"
              %ul.tabs-content
                %li#signupTab.active
                  = fields_for :new_user, @author do |author_f|
                    .row
                      .twelve.columns
                        = author_f.label :email, t("questions.new.fields.new_user_email.label")
                        = author_f.email_field :email
                    .row
                      .six.columns
                        = author_f.label :password, t("questions.new.fields.new_user_password.label")
                        = author_f.password_field :password
                      .six.columns
                        = author_f.label :password_confirmation, t("questions.new.fields.new_user_password_confirmation.label")
                        = author_f.password_field :password_confirmation
                      = render "shared/location_selector", :f => author_f
                %li#signinTab
                  = fields_for :user, @author do |author_f|
                    .row
                      .six.columns
                        = author_f.label :email, t("questions.new.fields.user_email.label")
                        = author_f.email_field :email
                      .six.columns
                        = author_f.label :password, t("questions.new.fields.user_password.label")
                        = author_f.password_field :password
        %section.actions
          .container
            .row
              .twelve.columns
                = f.submit t("questions.new.submit"), :class => "button"

  .four.columns
    .panel
      %h5=t "questions.new.tips.title"
      %p=t "questions.new.tips.content"
